<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘è¦æŠ•ç¨¿ - å°ç£ææ€–åœ°åœ–</title>
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#eee; margin:0; }
    h1 { text-align:center; padding:15px; background:#222; color:#ff4444; margin:0; cursor:pointer; }
    h2 { text-align:center; color:#66ccff; margin-top:10px; font-weight:normal; }

    #formContainer { 
      max-width: 900px; 
      margin: 20px auto; 
      background:#222; 
      padding:20px; 
      border-radius:12px; 
      box-shadow:0 0 10px rgba(0,0,0,0.5);
    }

    iframe { width:100%; height:700px; border:none; border-radius:8px; }

    footer { 
      margin-top:30px; 
      padding:20px; 
      background:#222; 
      text-align:center; 
      font-size:14px; 
      color:#bbb; 
    }

    #backToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff4444;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:0 4px 8px rgba(0,0,0,0.4);
    }
    #backToTop img {
      width: 24px;
      height: 24px;
    }

    #backButton {
      background: #444;
      border: none;
      color: #eee;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 15px;
      cursor: pointer;
      display: block;
      margin: 20px auto 0;
    }
  </style>
</head>
<body>
  <h1 onclick="goHome()">å°ç£ææ€–åœ°åœ–</h1>
  <h2>æˆ‘è¦æŠ•ç¨¿ - åˆ†äº«ä½ çš„æ•…äº‹</h2>

  <div id="formContainer">
    <iframe src="https://forms.gle/6YLTnDS8nPDyFPrdA" frameborder="0">è¼‰å…¥ä¸­â€¦</iframe>
  </div>

  <button id="backButton" onclick="goHome()">â† å›åˆ°æ¸…å–®</button>

  <button id="backToTop" onclick="window.scrollTo({top:0, behavior:'smooth'});">
    <img src="https://cdn-icons-png.flaticon.com/512/892/892692.png" alt="å›åˆ°é ‚ç«¯">
  </button>

  <footer>
    è¯çµ¡ä¿¡ç®±ï¼šnoahorror708@gmail.com ï½œ æœ¬ç¶²ç«™åƒ…æä¾›æ•…äº‹åˆ†äº«ï¼Œå…§å®¹ä¸ä»£è¡¨çœŸå¯¦äº‹ä»¶ã€‚<br>
    ğŸ†• ä»Šæ—¥æ–°å¢ <span id="todayCount">0</span> ç¯‡ ï½œ ğŸ“Š ç´¯è¨ˆ <span id="totalCount">0</span> ç¯‡
    <br>Â© 2025 å°ç£ææ€–åœ°åœ– All Rights Reserved.
  </footer>

  <!-- Firebase Firestore -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCK8DBDjoj5pZg3vaGtktVyUuWOPUxDumU",
      authDomain: "taiwan-horror-map.firebaseapp.com",
      projectId: "taiwan-horror-map"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function updatePostStats() {
      const snap = await getDocs(collection(db, "posts"));
      document.getElementById("totalCount").innerText = snap.size;

      const today = new Date();
      today.setHours(0,0,0,0);
      const todayISO = today.toISOString();

      let todayCount = 0;
      snap.forEach(doc => {
        const data = doc.data();
        if (data.createdAt && new Date(data.createdAt).toISOString() >= todayISO) {
          todayCount++;
        }
      });
      document.getElementById("todayCount").innerText = todayCount;
    }

    updatePostStats();

    function goHome() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
